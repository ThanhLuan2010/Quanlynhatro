{"version":3,"sources":["ButtonTabItem.tsx"],"names":["ButtonTabItemComponent","props","index","selectedIndex","countTab","indexAnimated","width","icon","renderTitle","title","titleShown","focused","bottom","isActive","value","progress","opacity","translateY","scale","_onPress","result","prevValue","containerIconStyle","justifyContent","alignItems","transform","titleStyle","buttonTab","paddingBottom","renderIcon","_renderTitle","showTitle","styles","ButtonTab","isEqual"],"mappings":"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","sourcesContent":["import React, { memo, useMemo, useCallback } from 'react';\nimport { View, TouchableOpacity } from 'react-native';\nimport Animated, {\n  useDerivedValue,\n  useAnimatedStyle,\n  useAnimatedReaction,\n  useSharedValue,\n} from 'react-native-reanimated';\nimport isEqual from 'react-fast-compare';\n\nimport type { TabBarItemProps } from '../../types';\nimport {\n  sharedRound,\n  sharedTiming,\n  useInterpolate,\n} from '../../AnimatedHelper';\n\nimport { styles } from './style';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nconst ButtonTabItemComponent = (props: TabBarItemProps) => {\n  // props\n  const {\n    index,\n    selectedIndex,\n    countTab,\n    indexAnimated,\n    width,\n    icon,\n    renderTitle,\n    title,\n    titleShown,\n    focused,\n  } = props;\n  // reanimated\n  const { bottom } = useSafeAreaInsets();\n  const isActive = useDerivedValue(() => sharedRound(indexAnimated.value));\n  const progress = useSharedValue(0);\n\n  const opacity = useInterpolate(progress, [0, 0.8], [1, 0]);\n  const translateY = useInterpolate(progress, [0, 0.4], [0, 10]);\n  const scale = useInterpolate(progress, [0, 1], [1, 0.5]);\n\n  // func\n  const _onPress = useCallback(() => {\n    selectedIndex.value = index;\n  }, [index, selectedIndex]);\n\n  // effect\n  useAnimatedReaction(\n    () => isActive.value === index,\n    (result, prevValue) => {\n      if (result !== prevValue) {\n        progress.value = sharedTiming(result ? 1 : 0);\n      }\n    }\n  );\n\n  // reanimated style\n  const containerIconStyle = useAnimatedStyle(() => ({\n    opacity: opacity.value,\n    justifyContent: 'center',\n    alignItems: 'center',\n    transform: [\n      {\n        translateY: translateY.value,\n      },\n    ],\n  }));\n\n  const titleStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const buttonTab = useMemo(\n    () => ({\n      width: width / countTab,\n      paddingBottom: bottom,\n    }),\n    [width, countTab, bottom]\n  );\n\n  // render\n  const renderIcon = useCallback(() => {\n    return icon({ progress, focused });\n  }, [focused, icon, progress]);\n\n  const _renderTitle = useCallback(() => {\n    return renderTitle?.({ progress, focused, title: title ?? '' });\n  }, [focused, progress, renderTitle, title]);\n\n  const showTitle = useCallback(() => {\n    if (typeof renderTitle === 'function') {\n      return _renderTitle();\n    }\n    return (\n      <Animated.Text\n        style={[styles.title, titleStyle]}\n        allowFontScaling={false}\n        numberOfLines={1}\n      >\n        {title ?? ''}\n      </Animated.Text>\n    );\n  }, [_renderTitle, renderTitle, title, titleStyle]);\n\n  // render\n  return (\n    <TouchableOpacity onPress={_onPress} activeOpacity={0.7}>\n      <View style={[styles.buttonTab, buttonTab]}>\n        <Animated.View style={[containerIconStyle]}>\n          {renderIcon()}\n          {titleShown ? showTitle() : null}\n        </Animated.View>\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nexport const ButtonTab = memo(ButtonTabItemComponent, isEqual);\n"]}