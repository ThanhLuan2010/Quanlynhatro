{"version":3,"sources":["AnimatedTabBar.tsx"],"names":["React","memo","useCallback","useEffect","useMemo","I18nManager","isEqual","CommonActions","Animated","runOnJS","useAnimatedReaction","useSharedValue","DEFAULT_ITEM_ANIMATION_DURATION","SIZE_DOT","TAB_BAR_COLOR","TAB_BAR_HEIGHT","CurvedTabBar","addWhitelistedNativeProps","width","stroke","backgroundColor","AnimatedTabBarComponent","props","navigation","tabs","descriptors","state","duration","barColor","dotSize","barHeight","dotColor","titleShown","barWidth","routes","index","navigationIndex","key","navigationKey","selectedIndex","getRouteTitle","route","options","tabBarLabel","undefined","title","name","getRouteTabConfigs","getRoutes","map","handleSelectedIndexChange","event","emit","type","target","canPreventDefault","defaultPrevented","dispatch","navigate","value","nextSelected","prevSelected","isRTL","AnimatedTabBar"],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useEffect, useMemo } from 'react';\nimport { I18nManager } from 'react-native';\nimport isEqual from 'react-fast-compare';\nimport type { BottomTabBarProps } from '@react-navigation/bottom-tabs';\nimport { CommonActions, Route } from '@react-navigation/native';\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useSharedValue,\n} from 'react-native-reanimated';\nimport {\n  DEFAULT_ITEM_ANIMATION_DURATION,\n  SIZE_DOT,\n  TAB_BAR_COLOR,\n  TAB_BAR_HEIGHT,\n} from './curved/constant';\nimport { CurvedTabBar } from './curved/CurvedTabBar';\nimport type {\n  TabBarAnimationConfigurableProps,\n  TabsConfigsType,\n} from './types';\n\nAnimated.addWhitelistedNativeProps({\n  width: true,\n  stroke: true,\n  backgroundColor: true,\n});\n\ninterface AnimatedTabBarProps\n  extends BottomTabBarProps,\n    TabBarAnimationConfigurableProps {\n  /**\n   * Tabs configurations.\n   */\n  tabs: TabsConfigsType;\n\n  /**\n   * Overwrite background color of tabbar\n   */\n  barColor?: string;\n\n  /**\n   * Overwrite radius of dot\n   */\n  dotSize?: number;\n\n  /**\n   * Overwrite height of tabbar\n   */\n  barHeight?: number;\n  /**\n   * Overwrite width of tabbar\n   */\n  barWidth?: number;\n\n  /**\n   * Custom dot color\n   */\n  dotColor?: string;\n\n  /**\n   * Show title or not\n   * @default false\n   */\n  titleShown?: boolean;\n}\nconst AnimatedTabBarComponent = (props: AnimatedTabBarProps) => {\n  // props\n  const {\n    navigation,\n    tabs,\n    descriptors,\n    state,\n    duration = DEFAULT_ITEM_ANIMATION_DURATION,\n    barColor = TAB_BAR_COLOR,\n    dotSize = SIZE_DOT,\n    barHeight = TAB_BAR_HEIGHT,\n    dotColor = TAB_BAR_COLOR,\n    titleShown = false,\n    barWidth,\n  } = props;\n\n  // variables\n\n  const {\n    routes,\n    index: navigationIndex,\n    key: navigationKey,\n  } = useMemo(() => {\n    return state;\n  }, [state]);\n\n  // reanimated\n  const selectedIndex = useSharedValue(0);\n\n  // callbacks\n  const getRouteTitle = useCallback(\n    (route: Route<string>) => {\n      const { options } = descriptors[route.key];\n      // eslint-disable-next-line no-nested-ternary\n      return options.tabBarLabel !== undefined &&\n        typeof options.tabBarLabel === 'string'\n        ? options.tabBarLabel\n        : options.title !== undefined\n        ? options.title\n        : route.name;\n    },\n    [descriptors]\n  );\n\n  const getRouteTabConfigs = useCallback(\n    (route: Route<string>) => {\n      return tabs[route.name];\n    },\n    [tabs]\n  );\n\n  const getRoutes = useCallback(() => {\n    return routes.map((route) => ({\n      key: route.key,\n      title: getRouteTitle(route),\n      ...getRouteTabConfigs(route),\n    }));\n  }, [routes, getRouteTitle, getRouteTabConfigs]);\n\n  const handleSelectedIndexChange = useCallback(\n    (index: number) => {\n      const { key, name } = routes[index];\n      const event = navigation.emit({\n        type: 'tabPress',\n        target: key,\n        canPreventDefault: true,\n      });\n\n      if (!event.defaultPrevented) {\n        navigation.dispatch({\n          ...CommonActions.navigate(name),\n          target: navigationKey,\n        });\n      }\n    },\n    [routes, navigation, navigationKey]\n  );\n\n  // effects\n  useEffect(() => {\n    selectedIndex.value = navigationIndex;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [navigationIndex]);\n\n  useAnimatedReaction(\n    () => selectedIndex.value,\n    (nextSelected, prevSelected) => {\n      if (nextSelected !== prevSelected) {\n        runOnJS(handleSelectedIndexChange)(nextSelected);\n      }\n    },\n    [selectedIndex, handleSelectedIndexChange]\n  );\n\n  // render\n  return (\n    <CurvedTabBar\n      isRtl={I18nManager.isRTL}\n      barWidth={barWidth}\n      titleShown={titleShown}\n      dotColor={dotColor}\n      barHeight={barHeight}\n      dotSize={dotSize}\n      tabBarColor={barColor}\n      selectedIndex={selectedIndex}\n      navigationIndex={navigationIndex}\n      routes={getRoutes()}\n      duration={duration}\n    />\n  );\n};\nexport const AnimatedTabBar = memo(AnimatedTabBarComponent, isEqual);\n"]}